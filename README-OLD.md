# PlutoChan
完成了pal4和crh项目，重写stock项目了，**此项目尽管只有一张表，但却值得深入分析**

## 文件说明

* 主程序入口：main.go
* 路由文件：routes.go
* 主模型文件：stock.go
* 工具杂烩：utils.go
* 模板目录：templates
* 静态目录：static

## 杂项心得
由于是交易记录，而且国内股市变化快，规则时常变，现将一些思路总结一下：

* 同一只股票，代码必定相同，但名字却不一定，时常因为分红扩股、效益不佳补披星戴帽等
* 尽管名字会变化，但频率不太高，因此查询单只的全部记录，还是通过传递名字比较符合人性化
* 在以代码为组，取股票名字时，以最新的为准；沪市收过户费，深市记录，但不收
* 股票代码为6位数字，其中沪市以6开头，而深市则以0与3开头

### 持仓股票的最新交易记录
基本原则是列出每只当前仍持仓的股票的最新的交易记录，买入与卖出各一条

* 只要股份增加，或是钱减少，就算是买入；股票减少，或是钱增加，就算是卖出

### 统计分析
分清仓与持仓两类进行统计

* 首先均是得出代码列表；然后针对每一支票，得出其首末交易日期，总买卖次数、持股天数、以次/周为单位的买卖频率等
* 对清仓股票，计算净利润、持股
* 尽管已基本完成了除新增记录之外的全部功能，甚至连结构的排序都做出来了，但如何将结构优化，减少重复字段，仍要继续
* 另外就是字段的展示，先前的项目都是通过大量增加额外字段来实现，这大幅增加了结构的复杂度，应该用text/template中的内置函数才对
* 每个表单输入，实际上都是字符串，最终都要进行类型转换